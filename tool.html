<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Math Tools</title>

  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <style type="text/css">
  .bs-component + .bs-component {
    margin-top: 1rem;
  }
  @media (min-width: 768px) {
    .bs-docs-section {margin-top: 8em;}
    .bs-component {position: relative;}
    .bs-component .modal {
      position: relative;
      top: auto;
      right: auto;
      bottom: auto;
      left: auto;
      z-index: 1;
      display: block;
    }
    .bs-component .modal-dialog {width: 90%;}
    .bs-component .popover {
      position: relative;
      display: inline-block;
      width: 220px;
      margin: 20px;
    }
    .nav-tabs {margin-bottom: 15px;}
    .progress {margin-bottom: 10px;}
    .function_list:hover {cursor: pointer; color:dodgerblue}
    .answer:hover{cursor: pointer;}
    .red{color:indianred}
    .blue{color:dodgerblue}
  }
  </style>
  <script src='js/statistics.js'></script>
  <script src='js/special_func.js'></script>
  <script src='js/gcd_lcm.js'></script>
  <script src='js/misc.js'></script>
</head>

<body>
<header>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="index.html">Nozomi</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarColor02">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="about.html">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="link.html">Links</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="blog.html">Blog</a>
        </li>
        <li class="nav-item">
					<a class="nav-link" href="nhk.html">NHKWeb</a>
				</li>
        <li class="nav-item">
          <a class="nav-link" href="ipathai.html">タイ語入力</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="tool.html">Math Tools<span class="sr-only">(current)</span></a>
        </li>
      </ul>
      <!--
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="text" placeholder="Search">
        <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
      </form>
      -->
    </div>
  </nav>
</header>

<br>
<div class="container">

  <div class="row">
    <div class="col-lg-12">
      <h2>Math Tools</h2>
      <h5>source code -> <a href="https://github.com/nozomiyamada/JS_mathtool" target="_blank">GitHub</a></h5>
      <p>You can try all function on the console (for Goolge Chrome, press F12 key to open)<br>
        <span onclick="show_function();" class="function_list"><strong>+ list of functions</strong></span>
        <div id='functions' style="display: none;">
          <ul>
            <li><code>gcd2(a,b)</code></li>
            <li><code>gcd(nums)</code></li>
            <li><code>lcm2(a,b)</code></li>
            <li><code>lcm(nums)</code></li>
            <li><code>combination(n,k)</code></li>
            <li><code>permutation(n,k)</code></li>
            <li><code>round(num,decimal=0)</code></li>
            <li><code>mean(nums)</code></li>
            <li><code>median(nums)</code></li>
            <li><code>variance(nums, unbiased=true)</code></li>
            <li><code>std(nums, unbiased=true)</code></li>
            <li><code>sme(nums)</code></li>
            <li><code>skewness(arr, regularize=false)</code></li>
            <li><code>welch(arr1, arr2)</code></li>    
            <li><code>convert_base(num, base_from, base_to)</code></li>
            <li><code>Euler_const</code></li>
            <li><code>gauss_legendre(func,a,b,split=1000,n=5)</code></li>
            <li><code>newton(func,func_prime,y,x0,iter=15)</code></li>
            <li><code>brent(func,y,a0,b0,iter=100,epsiron=1e-15)</code></li>
            <li><code>erf(z,split=1e3,n=5)</code></li>
            <li><code>erf2(z, N=100)</code></li>
            <li><code>erfc(z,split=1e3,n=5)</code></li>
            <li><code>inv_erf(y,iter=30)</code></li>
            <li><code>inv_erf2(y, N=300)</code></li>
            <li><code>fact(n)</code></li>
            <li><code>gamma(s,split=1e3,n=5)</code></li>
            <li><code>incomplete_gamma(s,x,split=1e3,n=5)</code></li>
            <li><code>inv_gamma(y,iter=30)</code></li>
            <li><code>inv_incomplete_gamma(s,y,x0=s,iter=30)</code></li>
            <li><code>gamma2(s,N=1e6)</code></li>
            <li><code>beta(a,b,split=1e3,n=5)</code></li>
            <li><code>incomplete_beta(a,b,x,split=1e3,n=5)</code></li>
            <li><code>regularized_beta(a,b,x,split=1e3,n=5)</code></li>
            <li><code>inv_regularized_beta(a,b,y,iter=30)</code></li>
            <li><code>sigmoid(x)</code></li>
            <li><code>z_to_p(z, taylor=false)</code></li>
            <li><code>p_to_z(p, taylor=false)</code></li>
            <li><code>t_to_p(t, df)</code></li>
            <li><code>p_to_t(p, df)</code></li>
            <li><code>chi_to_p(chi, df)</code></li>
            <li><code>p_to_chi(p, df)</code></li>
            <li><code>f_to_p(F, df1, df2)</code></li>
            <li><code>p_to_f(p, df1, df2)</code></li>
            <li><code>poisson(lambda, k)</code></li>
            <li><code>poisson_cum(lambda, k)</code></li>
            <li><code>poisson_to_p(lambda, k, split=100)</code></li>
          </ul>
        </div>
      </p>
    </div>
  </div>
  
  <div class="row">
    <div class="col-lg-6">
      <div class="bs-component">
        <div class="card border-secondary mb-3" style="min-height: 16rem;">
          <div class="card-header">Base Converter</div>
          <div class="card-body">
            <form onsubmit="convert();return false;">
            <table class='table'>
              <tr>
                <td>
                  <select class="form-control" id='base_from' style="min-width: 4rem;">
                    <option value=10 selected>10</option>
                    <option value=16>16</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                  </select>
                </td>
                <td><input type='text' class="form-control" id='num_to_convert' placeholder="from" autocomplete="off"></td>
              </tr>
              <tr>
                <td>
                  <select class="form-control" id='base_to' style="min-width: 4rem;">
                    <option value=16 selected>16</option>
                    <option value=10>10</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                  </select>
                </td>
                <td>
                  <button class="btn btn-outline-secondary" onclick="convert();return false">convert</button>
                  <button class="btn btn-outline-secondary" onclick="reset_base.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center"><strong id="answer">answer</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="bs-component">
        <div class="card border-secondary mb-3" style="min-height: 16rem;">
          <div class="card-header">GCD & LCM</div>
          <div class="card-body">
            <form onsubmit="show_gcd();return false;">
              <table class='table'>
                <tr>
                  <td colspan="2"><input type='text' class="form-control" id='gcd_input' placeholder="integers with space" autocomplete="off"></td>
                </tr>
                <tr>
                  <td>
                    <select class="form-control" id='select_gcd' style="min-width: 6rem;">
                      <option value="gcd" selected>GCD</option>
                      <option value="lcm">LCM</option>
                    </select>
                  </td>
                  <td>
                    <button class="btn btn-outline-secondary" onclick="show_gcd();return false">search</button>
                    <button class="btn btn-outline-secondary" onclick="reset_gcd.reset();return false">reset</button>
                  </td>
                </tr>
                <tr class="table-active">
                  <td colspan="2" align="center"><strong id="answer_gcd">answer</strong></td>
                </tr>
              </table>
              </form>
          </div>
        </div>
      </div>
    </div>

  </div> <!-- row GCD LCM-->

  <div class="row">
    <div class="col-lg-12">
      <h2>Statistics</h2>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="bs-component">
        <div class="card border-primary mb-3" style="min-height: 20rem;">
          <div class="card-header">statistics values & t-test</div>
          <div class="card-body">
            <form onsubmit="show_stats();return false;">
            <table class='table' style="table-layout: fixed;">
              <tr id='stats_input_row1'>
                <td colspan="6"><input type='text' class="form-control" id='stats_input1' placeholder="values with space" autocomplete="off"></td>
              </tr>
              <tr id='stats_input_row2' style="display: none;">
                <td colspan="6"><input type='text' class="form-control" id='stats_input2' placeholder="values with space" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="6">
                  <button class="btn btn-outline-primary" onclick="show_stats();return false">calculate</button>
                  <button class="btn btn-outline-primary" onclick="reset_stats.reset();return false">reset</button>
                  <input type="checkbox" id="unbiased" checked><label for="unbiased">&nbsp;unbiased</label>
                  <input type="checkbox" id="stats_add_check" onchange="stats_show_second_row();"><label for="stats_add_check">&nbsp;2 data</label>
                  <input type="checkbox" id="welch_check" onchange="stats_show_check_welch();" style="display: none;"><label for="welch" id="welch_label" style="display: none;">&nbsp;Welch's t</label>
                </td>
              </tr>
              <tr>
                <td align="center"><strong>df=N-1</strong></td>
                <td align="center"><strong>mean</strong></td>
                <td align="center"><strong>SD</strong></td>
                <td align="center"><strong>SEM</strong></td>
                <td align="center"><strong>median</strong></td>
                <td align="center"><strong>skewness</strong></td>
              </tr>
              <tr class="table-active" id='stats_output1'>
                <td align="center"><strong class='stats_output' id="df">0</strong></td>
                <td align="center"><strong class='stats_output' id="mean">0</strong></td>
                <td align="center"><strong class='stats_output' id="std">0</strong></td>
                <td align="center"><strong class='stats_output' id="sem">0</strong></td>
                <td align="center"><strong class='stats_output' id="median">0</strong></td>
                <td align="center"><strong class='stats_output' id="skewness">0</strong></td>
              </tr>
              <tr class="table-active" id='stats_output2' style="display: none">
                <td align="center"><strong class='stats_output' id="df2">0</strong></td>
                <td align="center"><strong class='stats_output' id="mean2">0</strong></td>
                <td align="center"><strong class='stats_output' id="std2">0</strong></td>
                <td align="center"><strong class='stats_output' id="sem2">0</strong></td>
                <td align="center"><strong class='stats_output' id="median2">0</strong></td>
                <td align="center"><strong class='stats_output' id="skewness2">0</strong></td>
              </tr>
              <tr id='stats_output_welch' style="display: none;">
                <td align="center"><strong id="welch_t">t-value</strong></td>
                <td align="center"><strong id="welch_df">df</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>
    
  </div> <!--row Poisson % Gamma distribution-->

  <div class="row">
    <div class="col-lg-12">
      <h2>normal & t distribution</h2>
    </div>
  </div>

  <div class="row">

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-success mb-3" style="min-height: 16rem;">
        <div class="card-header">z-score to p(z≤x)</div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/z_to_p.png"></p>
            <form onsubmit="z2p();return false;">
            <table class='table'>
              <tr><td><input type='text' class="form-control" id='input_z2p' placeholder="z-score" autocomplete="off"></td></tr>
              <tr>
                <td>
                <button class="btn btn-outline-success" onclick="z2p();return false">calculate</button>
                <button class="btn btn-outline-success" onclick="reset_z2p.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_z2p">p(z≤x)</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-success mb-3" style="min-height: 16rem;">
          <div class="card-header">p(z≤x) to z-score</div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/z_to_p.png"></p>
            <form onsubmit="p2z();return false;">
            <table class='table'>
              <tr><td><input type='text' class="form-control" id='input_p2z' placeholder="P(z≤x)" autocomplete="off"></td></tr>
              <tr>
                <td>
                <button class="btn btn-outline-success" onclick="p2z();return false">calculate</button>
                <button class="btn btn-outline-success" onclick="reset_p2z.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_p2z">z-score</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-warning mb-3" style="min-height: 16rem;">
          <div class="card-header">t-value to p(t≤x)</div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/t_to_p.png"></p>
            <form onsubmit="t2p();return false;">
            <table class='table'>
              <tr>
                <td><input type='text' class="form-control" id='input_t2p' placeholder="t-value" autocomplete="off"></td>
                <td><input type='text' class="form-control" id='input_t2p_df' placeholder="df" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="2">
                <button class="btn btn-outline-warning" onclick="t2p();return false">calculate</button>
                <button class="btn btn-outline-warning" onclick="reset_t2p.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_t2p">p(t≤x)</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-warning mb-3" style="min-height: 16rem;">
          <div class="card-header">p(t≤x) to t-value</div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/t_to_p.png"></p>
            <form onsubmit="p2t();return false;">
            <table class='table'>
              <tr>
                <td><input type='text' class="form-control" id='input_p2t' placeholder="p(t≤x)" autocomplete="off"></td>
                <td><input type='text' class="form-control" id='input_p2t_df' placeholder="df" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="2">
                <button class="btn btn-outline-warning" onclick="p2t();return false">calculate</button>
                <button class="btn btn-outline-warning" onclick="reset_p2t.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_p2t">t-value</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

  </div> <!--row normal & t distribution-->

  <div class="row">
    <div class="col-lg-12">
      <h2>χ<sup>2</sup> & F distribution</h2>
    </div>
  </div>

  <div class="row">

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-success mb-3" style="min-height: 16rem;">
        <div class="card-header">χ<sup>2</sup> to p</div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/chi_to_p.png"></p>
            <form onsubmit="chi2p();return false;">
            <table class='table'>
              <tr>
                <td><input type='text' class="form-control" id='input_chi2p' placeholder="chi2" autocomplete="off"></td>
                <td><input type='text' class="form-control" id='input_chi2p_df' placeholder="df" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="2">
                <button class="btn btn-outline-success" onclick="chi2p();return false">calculate</button>
                <button class="btn btn-outline-success" onclick="reset_chi2p.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_chi2p_up">p(χ<sup>2</sup>≤x)</strong></td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_chi2p_low">p(x≤χ<sup>2</sup>)</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-success mb-3" style="min-height: 16rem;">
          <div class="card-header">p to χ<sup>2</sup></div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/p_to_chi.png"></p>
            <form onsubmit="p2chi();return false;">
            <table class='table'>
              <tr>
                <td><input type='text' class="form-control" id='input_p2chi' placeholder="p" autocomplete="off"></td>
                <td><input type='text' class="form-control" id='input_p2chi_df' placeholder="df" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="2">
                <button class="btn btn-outline-success" onclick="p2chi();return false">calculate</button>
                <button class="btn btn-outline-success" onclick="reset_p2chi.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_p2chi_up">χ<sup>2</sup></strong></td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_p2chi_low">χ<sup>2</sup></strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-warning mb-3" style="min-height: 16rem;">
          <div class="card-header">F-value to p(F≤x)</div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/f_to_p.png"></p>
            <form onsubmit="f2p();return false;">
            <table class='table'>
              <tr>
                <td><input type='text' class="form-control" id='input_f2p' placeholder="F" autocomplete="off"></td>
                <td><input type='text' class="form-control" id='input_f2p_df' placeholder="df1 df2" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="2">
                <button class="btn btn-outline-warning" onclick="f2p();return false">calculate</button>
                <button class="btn btn-outline-warning" onclick="reset_f2p.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_f2p_up">p(F≤x)</strong></td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_f2p_low">p(x≤F)</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="bs-component">
        <div class="card border-warning mb-3" style="min-height: 16rem;">
          <div class="card-header">p to F-value</div>
          <div class="card-body">
            <p align="center"><img style="height: 100px; display: inline-block;" src="image/p_to_f.png"></p>
            <form onsubmit="p2f();return false;">
            <table class='table'>
              <tr>
                <td><input type='text' class="form-control" id='input_p2f' placeholder="p" autocomplete="off"></td>
                <td><input type='text' class="form-control" id='input_p2f_df' placeholder="df1 df2" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="2">
                <button class="btn btn-outline-warning" onclick="p2f();return false">calculate</button>
                <button class="btn btn-outline-warning" onclick="reset_p2f.reset();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_p2f_up">F-value</strong></td>
              </tr>
              <tr class="table-active">
                <td colspan="2" align="center" class="answer" onclick="copy_to_clipboard();"><strong id="answer_p2f_low">F-value</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>

  </div> <!--chi2 & F distribution-->

  <div class="row">
    <div class="col-lg-12">
      <h2>Poisson & Gamma Distribution</h2>
    </div>
  </div>
  
  <div class="row">
    <div class="col-lg-5">
      <div class="bs-component">
        <div class="card border-primary mb-3" style="min-height: 16rem;">
          <div class="card-header">Poisson Distribution</div>
          <div class="card-body">
            <form onsubmit="show_poisson();return false;">
            <table class='table'>
              <tr>
                <td><input type='text' class="form-control" id='poisson_input1' placeholder="mean times λ" autocomplete="off"></td>
                <td><input type='text' class="form-control" id='poisson_input2' placeholder="times k" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="2">
                  <button class="btn btn-outline-primary" onclick="show_poisson();return false">calculate</button>
                  <button class="btn btn-outline-primary" onclick="reset_poisson();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td align="center"><strong id="poisson1">P(X=k)</strong></td>
                <td align="center"><strong id="poisson2">P(X≤k)</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-7">
      <div class="bs-component">
        <div class="card border-info mb-3" style="min-height: 16rem;">
          <div class="card-header">Gamma Distribution</div>
          <div class="card-body">
            <form onsubmit="show_gamma();return false;">
            <table class='table'>
              <tr>
                <td colspan="2"><input type='text' class="form-control" id='gamma_input1' placeholder="mean period θ" autocomplete="off"></td>
                <td colspan="2"><input type='text' class="form-control" id='gamma_input2' placeholder="times k" autocomplete="off"></td>
                <td colspan="2"><input type='text' class="form-control" id='gamma_input3' placeholder="time x" autocomplete="off"></td>
              </tr>
              <tr>
                <td colspan="6">
                  <button class="btn btn-outline-info" onclick="show_gamma();return false">calculate</button>
                  <button class="btn btn-outline-info" onclick="reset_gamma();return false">reset</button>
                </td>
              </tr>
              <tr class="table-active">
                <td colspan="3" align="center"><strong id="gamma1">P(x)</strong></td>
                <td colspan="3" align="center"><strong id="gamma2">P(0~x)</strong></td>
              </tr>
            </table>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div> <!--row Poisson % Gamma distribution-->

</div> <!--container-->



<script>

  // convert base
  function convert(){
      let base_from = document.getElementById('base_from').value;
      let base_to = document.getElementById('base_to').value;
      let num = document.getElementById('num_to_convert').value;
      document.getElementById('answer').innerText = convert_base(num,base_from,base_to)
  }

  ///// GCD and LCM /////
  document.getElementById('gcd_input').oninput = validate_gcd;
  function validate_gcd(){
    let nums = document.getElementById('gcd_input').value.trim().split(/\s+/).map(Number); // delete spaces, split, cast as Number
    if(nums.every(Number.isInteger) && !nums.includes(0)){
      document.getElementById('gcd_input').classList.remove('is-invalid');
    }else{
      document.getElementById('gcd_input').classList.add('is-invalid');
    }
  }
  function show_gcd(){
    let elem = document.getElementById('gcd_input');
    let nums = elem.value.trim().split(/\s+/).map(Number);
    let mode = document.getElementById('select_gcd').value;
    if(nums.length>0 && !elem.classList.contains('is-invalid')){
      if(mode=='gcd'){
        document.getElementById('answer_gcd').innerText = 'GCD = ' + gcd(nums);
      }else if(mode='lcm'){
        document.getElementById('answer_gcd').innerText = 'LCM = ' + lcm(nums);
      }
      
    }
  }

  ///// show stats /////
  function stats_show_second_row(){
    var checked = document.getElementById("stats_add_check").checked;
    let ids_on = ['stats_input_row2','stats_output2','welch_check','welch_label'];
    let ids_off = ['stats_input_row2','stats_output2','welch_check','welch_label','stats_output_welch'];
    if(checked==true){
      for(var id of ids_on){
        document.getElementById(id).style.display = '';}
    }else{
      for(var id of ids_off){
        document.getElementById(id).style.display = 'none';}
      document.getElementById('welch_check').checked=false;
    }
  }
  function stats_show_check_welch(){
    if(document.getElementById('welch_check').checked==true){
      document.getElementById('stats_output_welch').style.display = '';
    }else{
      document.getElementById('stats_output_welch').style.display = 'none';
    }
  }
  function show_stats(){
    let nums1 = document.getElementById('stats_input1').value.trim().split(/[,\s]+/).map(Number); // delete spaces, split, cast as Number
    let N1 = Number(nums1.length);
    document.getElementById('df').innerText = N1-1;
    document.getElementById('mean').innerText = round(mean(nums1),5);
    document.getElementById('sem').innerText = round(sem(nums1),5)
    document.getElementById('median').innerText = round(median(nums1),5);
    document.getElementById('skewness').innerText = round(skewness(nums1),5);
    if(document.getElementById('unbiased').checked==true){
      document.getElementById('std').innerText = round(std(nums1),5);
    }else{
      document.getElementById('std').innerText = round(std(nums1,false),5);
    }
    if(document.getElementById("stats_add_check").checked==true){
      let nums2 = document.getElementById('stats_input2').value.trim().split(/[,\s]+/).map(Number);
      let N2 = Number(nums2.length);
      document.getElementById('df2').innerText = N2-1;
      document.getElementById('mean2').innerText = round(mean(nums2),5);
      document.getElementById('sem2').innerText = round(sem(nums2),5)
      document.getElementById('median2').innerText = round(median(nums2),5);
      document.getElementById('skewness2').innerText = round(skewness(nums2),5);
      if(document.getElementById('unbiased').checked==true){
        document.getElementById('std2').innerText = round(std(nums2),5);
      }else{
        document.getElementById('std2').innerText = round(std(nums2,false),5);
      }
      if(document.getElementById('welch_check').checked==true){
        let t_df = welch(nums1, nums2);
        document.getElementById('welch_t').innerText = 't-value = ' + round(t_df[0],5);
        document.getElementById('welch_df').innerText = 'df = ' + round(t_df[1],5);
        copy_tvalue();
      }
    }
  }
  function copy_tvalue(){
    let tvalue = document.getElementById('welch_t').innerText.split(' ')[2];
    let df = document.getElementById('welch_df').innerText.split(' ')[2];
    document.getElementById('input_t2p').value = Math.abs(tvalue);
    document.getElementById('input_t2p_df').value = df;
    document.getElementById('input_p2t_df').value = df;
    t2p();
  }

  ///// validate /////
  function validate(){
    let elem = event.target;
    let p = elem.value;
    if(p!='' && (p<0 || p>0.5)){
      elem.classList.add('is-invalid');
    }else{
      elem.classList.remove('is-invalid');
    }
  }
  document.getElementById('input_p2z').oninput = validate;
  document.getElementById('input_p2t').oninput = validate;
  document.getElementById('input_p2chi').oninput = validate;
  document.getElementById('input_p2f').oninput = validate;


  // functions for calcualation z,t,chi<>P
  function z2p(){
    let z = document.getElementById('input_z2p').value;
    document.getElementById('answer_z2p').innerText = 'p=' + round(z_to_p(z),6);
  }
  function p2z(){
    if(!document.getElementById('input_p2z').classList.contains('is-invalid')){
      let p = document.getElementById('input_p2z').value;
      document.getElementById('answer_p2z').innerText = 'z=' + round(p_to_z(p),6);
    }
  }
  function t2p(){
    let t = Number(document.getElementById('input_t2p').value);
    let df = Number(document.getElementById('input_t2p_df').value);
    document.getElementById('answer_t2p').innerText = 'p=' + round(t_to_p(t,df),6);
  }
  function p2t(){
    if(!document.getElementById('input_p2t').classList.contains('is-invalid')){
      let p = Number(document.getElementById('input_p2t').value);
      let df = Number(document.getElementById('input_p2t_df').value);
      document.getElementById('answer_p2t').innerText = 't=' + round(p_to_t(p,df),6);
    }
  }
  function chi2p(){
    let chi = Number(document.getElementById('input_chi2p').value);
    let df = Number(document.getElementById('input_chi2p_df').value);
    let answer = round(chi_to_p(chi,df),6);
    document.getElementById('answer_chi2p_up').innerHTML = '<span class="blue">upper</span> p=' + answer;
    document.getElementById('answer_chi2p_low').innerHTML = '<span class="red">lower</span> p=' + round(1-answer,6);
  }
  function p2chi(){
    if(!document.getElementById('input_p2chi').classList.contains('is-invalid')){
      let p = Number(document.getElementById('input_p2chi').value);
      let df = Number(document.getElementById('input_p2chi_df').value);
      let answer1 = round(p_to_chi(p,df),6);
      let answer2 = round(p_to_chi(1-p,df),6);
      document.getElementById('answer_p2chi_up').innerHTML = '<span class="blue">upper</span> χ<sup>2</sup>=' + answer1;
      document.getElementById('answer_p2chi_low').innerHTML = '<span class="red">lower</span> χ<sup>2</sup>=' + answer2;
    }
  }
  function f2p(){
    let f = Number(document.getElementById('input_f2p').value);
    let df = document.getElementById('input_f2p_df').value.trim().split(/\s+/).map(Number);
    if(df.length==2 && df.every(Number)){
      document.getElementById('input_f2p_df').classList.remove('is-invalid');
      let answer = round(f_to_p(f,df[0],df[1]),6);
      document.getElementById('answer_f2p_up').innerHTML = '<span class="blue">upper</span> p=' + answer;
      document.getElementById('answer_f2p_low').innerHTML = '<span class="red">lower</span> p=' + round(1-answer,6);
    }else{
      document.getElementById('input_f2p_df').classList.add('is-invalid');
      document.getElementById('input_f2p_df').focus();
    }
  }
  function p2f(){
    if(!document.getElementById('input_p2f').classList.contains('is-invalid')){
      let p = Number(document.getElementById('input_p2f').value);
      let df = document.getElementById('input_p2f_df').value.trim().split(/\s+/).map(Number);
      if(df.length==2 && df.every(Number)){
        document.getElementById('input_p2f_df').classList.remove('is-invalid');
        let answer1 = round(p_to_f(p,df[0],df[1]),6);
        let answer2 = round(p_to_f(1-p,df[0],df[1]),6);
        document.getElementById('answer_p2f_up').innerHTML = '<span class="blue">upper</span> F=' + answer1;
        document.getElementById('answer_p2f_low').innerHTML = '<span class="red">lower</span> F=' + answer2;
      }else{
        document.getElementById('input_p2f_df').classList.add('is-invalid');
        document.getElementById('input_p2f_df').focus();
      }
    }
  }


  function show_poisson(){
    var elem1 = document.getElementById('poisson_input1');
    var elem2 = document.getElementById('poisson_input2');
    if(!elem1.classList.contains('is-invalid') && !elem2.classList.contains('is-invalid')){
      var l = Math.round(elem1.value);
      var k = Math.round(elem2.value);
      p = poisson(l,k);
      cum = poisson_cum(l,k);
      document.getElementById('poisson1').innerText = `P(X=${k}) = ` + round(p,4);
      document.getElementById('poisson2').innerText = `P(X≥${k}) = ` + round(cum,4);
    }
  }

  // validate poisson
  document.getElementById('poisson_input1').oninput = validation_poisson;
  document.getElementById('poisson_input2').oninput = validation_poisson;
  function validation_poisson(){
    var l = document.getElementById('poisson_input1').value;
    var k = document.getElementById('poisson_input2').value;
    if(l!='' && !Number.isInteger(Number(l))){
      document.getElementById('poisson_input1').classList.add('is-invalid')
    }else{
      document.getElementById('poisson_input1').classList.remove('is-invalid')
    }
    if(k!='' && !Number.isInteger(Number(k))){
      document.getElementById('poisson_input2').classList.add('is-invalid')
    }else{
      document.getElementById('poisson_input2').classList.remove('is-invalid')
    }
  }


  // validate gamma
  document.getElementById('gamma_input1').oninput = validation_gamma;
  document.getElementById('gamma_input2').oninput = validation_gamma;
  document.getElementById('gamma_input3').oninput = validation_gamma;
  function validation_gamma(){
    var t = document.getElementById('gamma_input1').value;
    var k = document.getElementById('gamma_input2').value;
    var x = document.getElementById('gamma_input3').value;
    if(t='' || Number(t)>=0){
      document.getElementById('gamma_input1').classList.remove('is-invalid')
    }else{
      document.getElementById('gamma_input1').classList.add('is-invalid')
    }
    if(k='' || Number(k)>=0){
      document.getElementById('gamma_input2').classList.remove('is-invalid')
    }else{
      document.getElementById('gamma_input2').classList.add('is-invalid')
    }
    if(x='' || Number(x)>=0){
      document.getElementById('gamma_input3').classList.remove('is-invalid')
    }else{
      document.getElementById('gamma_input3').classList.add('is-invalid')
    }
  }
  function show_gamma(){
    var elem1 = document.getElementById('gamma_input1');
    var elem2 = document.getElementById('gamma_input2');
    var elem3 = document.getElementById('gamma_input3');
    if(!elem1.classList.contains('is-invalid') && !elem2.classList.contains('is-invalid') && !elem3.classList.contains('is-invalid')){
      var t = elem1.value;
      var k = elem2.value;
      var x = elem3.value;
      var gamma_k = calc_gamma(k);
      var p = x**(k-1)*(Math.E**(-x/t))/gamma_k/(t**k);
      var cum = incomplete_gamma(k,x/t)/gamma_k;
      document.getElementById('gamma1').innerText = 'P(x) = ' + round(p,5);
      document.getElementById('gamma2').innerText = 'P(0~x) = ' + round(cum,5);
    }
  }


// inputs(array) - ID of input to be empty string
// labelsID(dict) - {ID: innerText}
// focusID(string) - one element to be focused
// labels_class(dict) - {classname: innerText}
class ResetBtn{
  constructor(inputs,labelsID,focusID,labels_class=null){
    this.inputs = inputs;
    this.labelsID = labelsID;
    this.labels_class = labels_class;
    this.focus = focusID;
  }
  reset(){
    for(var elemID of this.inputs){ // reset input
      document.getElementById(elemID).value = '';
    }
    for(var labelID in this.labelsID){ // reset label
      document.getElementById(labelID).innerHTML = this.labelsID[labelID];
    }
    for(var label_class in this.labels_class){ 
      for(var elem of document.getElementsByClassName(label_class)){
        elem.innerText = this.labels_class[label_class];
      }
    }
    document.getElementById(this.focus).focus(); // focus
  }
}
var reset_base = new ResetBtn(['num_to_convert'],{'answer':'answer'},'num_to_convert');
var reset_gcd = new ResetBtn(['gcd_input'],{'answer_gcd':'answer'},'gcd_input');
var reset_stats = new ResetBtn(
  ['stats_input1','stats_input2'],
  {'welch_t':'t-value','welch_df':'df'},
  'stats_input1',
  {'stats_output':0});
var reset_z2p = new ResetBtn(['input_z2p'],{'answer_z2p':'p(z≤x)'},'input_z2p');
var reset_p2z = new ResetBtn(['input_p2z'],{'answer_p2z':'z-score'},'input_p2z');
var reset_t2p = new ResetBtn(['input_t2p','input_t2p_df'],{'answer_t2p':'p(t≤x)'},'input_t2p');
var reset_p2t = new ResetBtn(['input_p2t','input_p2t_df'],{'answer_p2t':'t-value'},'input_p2t');
var reset_chi2p = new ResetBtn(['input_chi2p','input_chi2p_df'],{'answer_chi2p_up':'p(χ<sup>2</sup>≤x)','answer_chi2p_low':'p(x≤χ<sup>2</sup>)'},'input_chi2p');
var reset_p2chi = new ResetBtn(['input_p2chi','input_p2chi_df'],{'answer_p2chi_up':'χ<sup>2</sup>','answer_p2chi_low':'χ<sup>2</sup>'},'input_p2chi');
var reset_f2p = new ResetBtn(['input_f2p','input_f2p_df'],{'answer_f2p_up':'p(F≤x)','answer_f2p_low':'p(x≤F)'},'input_f2p');
var reset_p2f = new ResetBtn(['input_p2f','input_p2f_df'],{'answer_p2f_up':'F-value','answer_p2f_low':'F-value'},'input_p2f');

  function reset_poisson(){
    document.getElementById('poisson_input1').value = '';
    document.getElementById('poisson_input2').value = '';
    document.getElementById('poisson1').innerText = 'P(X=k)';
    document.getElementById('poisson2').innerText = 'P(X≤k)';
    document.getElementById('poisson_input1').focus();
  }
  function reset_gamma(){
    document.getElementById('gamma_input1').value = '';
    document.getElementById('gamma_input2').value = '';
    document.getElementById('gamma_input3').value = '';
    document.getElementById('gamma1').innerText = 'P(x)';
    document.getElementById('gamma2').innerText = 'P(0~x)';
    document.getElementById('gamma_input1').focus();
  }

  function show_function(){
    elem = document.getElementById('functions');
    if(elem.style.display=='none'){
      elem.style.display='block';
    }else{
      elem.style.display='none'
    }
  }

  function copy_to_clipboard(){
    var temp_elem = document.createElement("textarea");
    temp_elem.textContent = event.target.innerText.split('=').slice(-1)[0];
    var body_elem = document.getElementsByTagName("body")[0];
    body_elem.appendChild(temp_elem);
    temp_elem.select();
    document.execCommand("Copy");
    body_elem.removeChild(temp_elem);
  }


</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="./js/bootstrap.min.js"></script>

<script type="text/javascript">
  $('.bs-component [data-toggle="popover"]').popover();
  $('.bs-component [data-toggle="tooltip"]').tooltip();
</script>
</body>
</html>
