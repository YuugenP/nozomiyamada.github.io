<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>WORDLE SOLVER</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6/dist/vue.js"></script>
  <script src="./js/wordle_freqs.js" charset="utf-8"></script>
  <script src="./js/wordle_funcs.js" charset="utf-8"></script>
  <style>
    input { 
      text-align: center; 
      text-transform: uppercase;
      max-width: 3em;
      max-height: 2.5em; 
      margin-left: auto; 
      margin-right: auto;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }
    .green{background-color: #79A86B;}
    .yellow{background-color: #C6B566;}
    .grey{background-color: #797C7E;}
  </style>
</head>

<body>

<div class="container" id="main">
  <div class="page-header">
    <div class="row mt-4">
      <div class="col-12">
        <h3 class="display-5">WORDLE SOLVER</h3>
        <p>Result is sorted by word frequncy</p>
        <p><b>Double Click</b> to chenge the color <button class="btn" onclick="window.location.reload();">CLEAR</button></p>
        <table class="table" style="max-width: 600px;">
          <tr>
            <th>1</th>
            <td v-bind:class="[w1.color1]" @dblclick="toggle(1,1);">
              <input type="text" class="form-control" maxlength="1" v-model="w1.chr1" @input="show_result($event)">
            </td>
            <td v-bind:class="[w1.color2]" @dblclick="toggle(1,2);">
              <input type="text" class="form-control" maxlength="1" v-model="w1.chr2" @input="show_result($event)">
            </td>
            <td v-bind:class="[w1.color3]" @dblclick="toggle(1,3);">
              <input type="text" class="form-control" maxlength="1" v-model="w1.chr3" @input="show_result($event)">
            </td>
            <td v-bind:class="[w1.color4]" @dblclick="toggle(1,4);">
              <input type="text" class="form-control" maxlength="1" v-model="w1.chr4" @input="show_result($event)">
            </td>
            <td v-bind:class="[w1.color5]" @dblclick="toggle(1,5);">
              <input type="text" class="form-control" maxlength="1" v-model="w1.chr5" @input="show_result($event)">
            </td>
          </tr>
          <tr>
            <th class="my-4">2</th>
            <td v-bind:class="[w2.color1]" @dblclick="toggle(2,1);">
              <input type="text" class="form-control" maxlength="1" v-model="w2.chr1" @input="show_result($event)">
            </td>
            <td v-bind:class="[w2.color2]" @dblclick="toggle(2,2);">
              <input type="text" class="form-control" maxlength="1" v-model="w2.chr2" @input="show_result($event)">
            </td>
            <td v-bind:class="[w2.color3]" @dblclick="toggle(2,3);">
              <input type="text" class="form-control" maxlength="1" v-model="w2.chr3" @input="show_result($event)">
            </td>
            <td v-bind:class="[w2.color4]" @dblclick="toggle(2,4);">
              <input type="text" class="form-control" maxlength="1" v-model="w2.chr4" @input="show_result($event)">
            </td>
            <td v-bind:class="[w2.color5]" @dblclick="toggle(2,5);">
              <input type="text" class="form-control" maxlength="1" v-model="w2.chr5" @input="show_result($event)">
            </td>
          </tr>
          <tr class="my-4">
            <th>3</th>
            <td v-bind:class="[w3.color1]" @dblclick="toggle(3,1);">
              <input type="text" class="form-control" maxlength="1" v-model="w3.chr1" @input="show_result($event)">
              
            </td>
            <td v-bind:class="[w3.color2]" @dblclick="toggle(3,2);">
              <input type="text" class="form-control" maxlength="1" v-model="w3.chr2" @input="show_result($event)">
            </td>
            <td v-bind:class="[w3.color3]" @dblclick="toggle(3,3);">
              <input type="text" class="form-control" maxlength="1" v-model="w3.chr3" @input="show_result($event)">
            </td>
            <td v-bind:class="[w3.color4]" @dblclick="toggle(3,4);">
              <input type="text" class="form-control" maxlength="1" v-model="w3.chr4" @input="show_result($event)">
            </td>
            <td v-bind:class="[w3.color5]" @dblclick="toggle(3,5);">
              <input type="text" class="form-control" maxlength="1" v-model="w3.chr5" @input="show_result($event)">
            </td>
          </tr>
          <tr>
            <th>4</th>
            <td v-bind:class="[w4.color1]" @dblclick="toggle(4,1);">
              <input type="text" class="form-control" maxlength="1" v-model="w4.chr1" @input="show_result($event)">
            </td>
            <td v-bind:class="[w4.color2]" @dblclick="toggle(4,2);">
              <input type="text" class="form-control" maxlength="1" v-model="w4.chr2" @input="show_result($event)">
            </td>
            <td v-bind:class="[w4.color3]" @dblclick="toggle(4,3);">
              <input type="text" class="form-control" maxlength="1" v-model="w4.chr3" @input="show_result($event)">
            </td>
            <td v-bind:class="[w4.color4]" @dblclick="toggle(4,4);">
              <input type="text" class="form-control" maxlength="1" v-model="w4.chr4" @input="show_result($event)">
            </td>
            <td v-bind:class="[w4.color5]" @dblclick="toggle(4,5);">
              <input type="text" class="form-control" maxlength="1" v-model="w4.chr5" @input="show_result($event)">
            </td>
          </tr>
          <tr>
            <th>5</th>
            <td v-bind:class="[w5.color1]" @dblclick="toggle(5,1);">
              <input type="text" class="form-control" maxlength="1" v-model="w5.chr1" @input="show_result($event)">
            </td>
            <td v-bind:class="[w5.color2]" @dblclick="toggle(5,2);">
              <input type="text" class="form-control" maxlength="1" v-model="w5.chr2" @input="show_result($event)">
            </td>
            <td v-bind:class="[w5.color3]" @dblclick="toggle(5,3);">
              <input type="text" class="form-control" maxlength="1" v-model="w5.chr3" @input="show_result($event)">
            </td>
            <td v-bind:class="[w5.color4]" @dblclick="toggle(5,4);">
              <input type="text" class="form-control" maxlength="1" v-model="w5.chr4" @input="show_result($event)">
            </td>
            <td v-bind:class="[w5.color5]" @dblclick="toggle(5,5);">
              <input type="text" class="form-control" maxlength="1" v-model="w5.chr5" @input="show_result($event)">
            </td>
          </tr>
        </table>
        <h4 class="mt-4">50 Frequent Candidates</h4>
        <div>
          {{ candidates }}
        </div>
      </div>
    </div>
  </div>
</div>

<script>

	var vue = new Vue({
		el: '#main',
		data: {
      w1: {chr1:'',chr2:'',chr3:'',chr4:'',chr5:'',color1:'grey',color2:'grey',color3:'grey',color4:'grey',color5:'grey'},
      w2: {chr1:'',chr2:'',chr3:'',chr4:'',chr5:'',color1:'grey',color2:'grey',color3:'grey',color4:'grey',color5:'grey'},
      w3: {chr1:'',chr2:'',chr3:'',chr4:'',chr5:'',color1:'grey',color2:'grey',color3:'grey',color4:'grey',color5:'grey'},
      w4: {chr1:'',chr2:'',chr3:'',chr4:'',chr5:'',color1:'grey',color2:'grey',color3:'grey',color4:'grey',color5:'grey'},
      w5: {chr1:'',chr2:'',chr3:'',chr4:'',chr5:'',color1:'grey',color2:'grey',color3:'grey',color4:'grey',color5:'grey'},
      candidates: "no answer"
    },
    methods: {
      toggle: function(w_index, chr_index){
        eval(`color_now = this.w${w_index}.color${chr_index}`);
        if(color_now == 'green'){
          eval(`this.w${w_index}.color${chr_index} = 'grey'`);
        }else if(color_now == 'yellow'){
          eval(`this.w${w_index}.color${chr_index} = 'green'`);
        }else{
          eval(`this.w${w_index}.color${chr_index} = 'yellow'`);
        }
        this.show_result(null);
      },
      show_result: function(input_event){
        word1 = make_list(this.w1);
        word2 = make_list(this.w2);
        word3 = make_list(this.w3);
        word4 = make_list(this.w4);
        word5 = make_list(this.w5);
        // console.log(word1.map(x=>x[0]).join(''), word1.map(x=>x[1]).join('/'));
        result = search_words(word1,word2,word3,word4,word5);
        if(result != null){
          this.candidates = result; //+ '\n' + word1.map(x=>x[0]).join('') + '\n' + word1.map(x=>x[1]).join('/');
        }
        // if input event, move focus
        if(input_event!=null && input_event.target.value.length != 0){
          var elems = document.querySelectorAll('input');
          for(var i=0; i<elems.length; i++){
            if(elems[i] == input_event.target){
              elems[i+1].focus();
              break;
            }
          }
        }
      }
    }
	})


</script>

</body>
</html>